services:
  holocron:
    image: helloseam/holocron:latest
    build: .
    privileged: true
    environment:
      - GPG_PASSPHRASE=${GPG_PASSPHRASE:-}
      - GPG_PRIVATE_KEY=${GPG_PRIVATE_KEY:-}
      - GPG_KEY_ID=${GPG_KEY_ID:-}
      - HOLOCRON_ARCH=${HOLOCRON_ARCH:-}
      - HOLOCRON_VARIANT=${HOLOCRON_VARIANT:-}
      - OSTREE_REPO=${OSTREE_REPO:-/tmp/holocron-ostree}
    tmpfs:
      - /tmp
      - /var/lib/containers/storage
    volumes:
      - ${HOME}/.docker:/root/.docker
      - ${OSTREE_REPO:-/tmp/holocron-ostree}:${OSTREE_REPO:-/tmp/holocron-ostree}
